(this.webpackJsonpnexpisode=this.webpackJsonpnexpisode||[]).push([[0],{24:function(e,t,n){},25:function(e,t,n){},27:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(17),i=n.n(r),s=(n(24),n(9)),o=n(18),u=n(2),h=function(e){return e.toLocaleString("en-US",{timeZone:"PST"})},j=function(e){var t=e/1e3;return{amount:t,unit:t>1?"seconds":"second"}},p=function(e){var t=j(e).amount/60;return{amount:t,unit:t>1?"mins":"min"}},d=function(e){var t=p(e).amount/60;return{amount:t,unit:t>1?"hours ":"hour"}},b=(n(25),n(1)),l=h(new Date),x=function(e){var t=e.changeDate,n=e.airDate,a=e.nexpisode;return Object(b.jsxs)("div",{className:"episode",children:[Object(b.jsxs)("div",{children:["Next Air Date: ",n.pst>l?n.pst:"\xaf\\_(\u30c4)_/\xaf"]}),Object(b.jsx)("br",{}),Object(b.jsxs)("button",{onClick:t,children:[a,Object(b.jsx)("br",{}),"remaining..."]})]})},O=(n(27),function(){return Object(b.jsxs)("div",{className:"wrapper",children:[Object(b.jsx)("div",{children:"When is the next episode?"}),Object(b.jsxs)("div",{className:"shows",children:[Object(b.jsx)("a",{href:"/bachelor",children:" Bachelor"}),Object(b.jsx)("a",{href:"/bachelorette",children:" Bachelorette"}),Object(b.jsx)("a",{href:"/sp",children:" South Park"}),Object(b.jsx)("a",{href:"/st",children:" Stranger Things"}),Object(b.jsx)("a",{href:"/kardashians",children:" Keeping up with the Kardashians"})]})]})}),f={bachelor:"70869?year=25",kardashians:"80725?year=20",bachelorette:"71187?year=19",st:"305288?year=4",southpark:"75897?year=25",sp:"75897?year=25"},v=function(e){var t=e.match(/\d+/g);return new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5])},g=function(e,t){return v(e)-v(t)},m=n(8),D=n.n(m),w=n(11),S="https://api4.thetvdb.com";function y(){return(y=Object(w.a)(D.a.mark((function e(t,n){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(S,"/v4/series/").concat(n),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 3:return a=e.sent,e.abrupt("return",a.json());case 7:throw e.prev=7,e.t0=e.catch(0),console.log("failure fetching episode: ".concat(n)),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var k=function(e,t){return y.apply(this,arguments)},T="https://api4.thetvdb.com",I={apikey:"0d51e828-60db-448d-8ec4-2bceb87316d7",pin:"WORUCUTI"},C={"Content-Type":"application/json",accept:"application/json"};function E(){return(E=Object(w.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(T,"/v4/login"),{method:"POST",headers:C,body:JSON.stringify(I)});case 3:return t=e.sent,e.abrupt("return",t.json());case 7:throw e.prev=7,e.t0=e.catch(0),console.log("JWT token error"),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var B=function(){return E.apply(this,arguments)},F=[j,p,d,function(e){var t=d(e).amount/24;return{amount:t,unit:t>1?"days ":"day"}}],N=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)("\xaf\\_(\u30c4)_/\xaf"),i=Object(s.a)(r,2),j=i[0],p=i[1],d=Object(a.useState)(0),l=Object(s.a)(d,2),v=l[0],m=l[1],D=Object(a.useState)({iso:(new Date).toISOString(),pst:h(new Date)}),w=Object(s.a)(D,2),S=w[0],y=w[1],T=Object(a.useState)({iso:(new Date).toISOString(),pst:h(new Date)}),I=Object(s.a)(T,2),C=I[0],E=I[1],N=function(){var e=(v+1)%F.length;m(e)};return Object(a.useEffect)((function(){var e=window.location.pathname.replace(/\W/g,"");e&&c(f[e]),n&&B().then((function(e){k(e.data.token,n).then((function(e){if(e.data.nextAired){var t=new Date("".concat(e.data.nextAired).concat("T20:00:00")).toISOString();y({iso:t,pst:h(new Date(t))})}}))}))}),[n]),Object(a.useEffect)((function(){var e=g(S.iso,C.iso);if(e>0){var t=F[v](e);p("".concat(t.amount.toLocaleString("en-US",{maximumFractionDigits:0})," ").concat(t.unit))}var n=setInterval((function(){return E({iso:(new Date).toISOString(),pst:h(Date())})}),1e3);return function(){return clearInterval(n)}}),[S,v,C]),Object(b.jsx)(o.a,{children:Object(b.jsxs)(u.c,{children:[Object(b.jsx)(u.a,{exact:!0,path:"/bachelor",children:Object(b.jsx)(x,{nexpisode:j,airDate:S,changeDate:N})}),Object(b.jsx)(u.a,{exact:!0,path:"/kardashians",children:Object(b.jsx)(x,{nexpisode:j,airDate:S,changeDate:N})}),Object(b.jsx)(u.a,{exact:!0,path:"/bachelorette",onClick:N,children:Object(b.jsx)(x,{nexpisode:j,airDate:S,changeDate:N})}),Object(b.jsx)(u.a,{exact:!0,path:"/sp",children:Object(b.jsx)(x,{nexpisode:j,airDate:S,changeDate:N})}),Object(b.jsx)(u.a,{exact:!0,path:"/st",children:Object(b.jsx)(x,{nexpisode:j,airDate:S,changeDate:N})}),Object(b.jsx)(u.a,{exact:!0,path:"/south-park",children:Object(b.jsx)(x,{nexpisode:j,airDate:S,changeDate:N})}),Object(b.jsx)(u.a,{exact:!0,path:"/",children:Object(b.jsx)(O,{})})]})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,35)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};i.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(N,{})}),document.getElementById("root")),P()}},[[34,1,2]]]);
//# sourceMappingURL=main.be8f9a8e.chunk.js.map