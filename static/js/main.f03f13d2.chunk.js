(this.webpackJsonpnexpisode=this.webpackJsonpnexpisode||[]).push([[0],{24:function(t,e,n){},26:function(t,e,n){},33:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),r=n(17),o=n.n(r),i=(n(24),n(9)),s=n(18),u=n(1),p=function(t){return t.toLocaleString("en-US",{timeZone:"PST"})},h=function(t){var e=t/1e3;return{amount:e,unit:e>1?"seconds":"second"}},l=function(t){var e=h(t).amount/60;return{amount:e,unit:e>1?"mins":"min"}},b=function(t){var e=l(t).amount/60;return{amount:e,unit:e>1?"hours ":"hour"}},j=function(t){var e=t.match(/\d+/g);return new Date(e[0],e[1]-1,e[2],e[3],e[4],e[5])},d=function(t,e){return j(t)-j(e)},f=n(8),O=n.n(f),m=n(11),x="https://api4.thetvdb.com";function v(){return(v=Object(m.a)(O.a.mark((function t(e,n){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(x,"/v4/series/").concat(n),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});case 3:return a=t.sent,t.abrupt("return",a.json());case 7:throw t.prev=7,t.t0=t.catch(0),console.log("failure fetching episode: ".concat(n)),new Error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}var g=function(t,e){return v.apply(this,arguments)},S="https://api4.thetvdb.com",w={apikey:"0d51e828-60db-448d-8ec4-2bceb87316d7",pin:"WORUCUTI"},y={"Content-Type":"application/json",accept:"application/json"};function k(){return(k=Object(m.a)(O.a.mark((function t(){var e;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(S,"/v4/login"),{method:"POST",headers:y,body:JSON.stringify(w)});case 3:return e=t.sent,t.abrupt("return",e.json());case 7:throw t.prev=7,t.t0=t.catch(0),console.log("JWT token error"),new Error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}var D=function(){return k.apply(this,arguments)},C=(n(26),n(2)),I={bachelor:"70869?year=25",bachelorette:"71187?year=19",southpark:"75897?year=25",sp:"75897?year=25"},T=[h,l,b,function(t){var e=b(t).amount/24;return{amount:e,unit:e>1?"days ":"day"}}],E=function(){var t=Object(a.useState)(null),e=Object(i.a)(t,2),n=e[0],c=e[1],r=Object(a.useState)("\xaf\\_(\u30c4)_/\xaf"),o=Object(i.a)(r,2),h=o[0],l=o[1],b=Object(a.useState)(0),j=Object(i.a)(b,2),f=j[0],O=j[1],m=Object(a.useState)({iso:(new Date).toISOString(),pst:p(new Date)}),x=Object(i.a)(m,2),v=x[0],S=x[1],w=Object(a.useState)({iso:(new Date).toISOString(),pst:p(new Date)}),y=Object(i.a)(w,2),k=y[0],E=y[1],N=function(){var t=(f+1)%T.length;O(t)};return Object(a.useEffect)((function(){var t=window.location.pathname.replace(/\W/g,"");t&&c(I[t]),n&&D().then((function(t){g(t.data.token,n).then((function(t){if(t.data.nextAired){var e=new Date("".concat(t.data.nextAired).concat("T20:00:00")).toISOString();S({iso:e,pst:p(new Date(e))})}}))}))}),[n]),Object(a.useEffect)((function(){var t=d(v.iso,k.iso);if(t>0){var e=T[f](t);l("".concat(e.amount.toLocaleString("en-US",{maximumFractionDigits:0})," ").concat(e.unit))}var n=setInterval((function(){return E({iso:(new Date).toISOString(),pst:p(Date())})}),1e3);return function(){return clearInterval(n)}}),[v,f,k]),Object(C.jsx)(s.a,{children:Object(C.jsxs)(u.c,{children:[Object(C.jsx)(u.a,{exact:!0,path:"/bachelor",children:Object(C.jsxs)("button",{className:"episode",onClick:N,children:[h,Object(C.jsx)("br",{}),"remaining..."]})}),Object(C.jsx)(u.a,{exact:!0,path:"/bachelorette",onClick:N,children:Object(C.jsxs)("div",{className:"episode",children:[h,Object(C.jsx)("br",{}),"remaining..."]})}),Object(C.jsx)(u.a,{exact:!0,path:"/sp",children:Object(C.jsxs)("button",{className:"episode",onClick:N,children:[h,Object(C.jsx)("br",{}),"remaining..."]})}),Object(C.jsx)(u.a,{exact:!0,path:"/south-park",children:Object(C.jsxs)("button",{className:"episode",onClick:N,children:[h,Object(C.jsx)("br",{}),"remaining..."]})}),Object(C.jsx)(u.a,{exact:!0,path:"/",children:Object(C.jsx)("div",{className:"episode",children:"When is the next episode?"})})]})})},N=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,34)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),a(t),c(t),r(t),o(t)}))};o.a.render(Object(C.jsx)(c.a.StrictMode,{children:Object(C.jsx)(E,{})}),document.getElementById("root")),N()}},[[33,1,2]]]);
//# sourceMappingURL=main.f03f13d2.chunk.js.map