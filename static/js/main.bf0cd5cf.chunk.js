(this.webpackJsonpnexpisode=this.webpackJsonpnexpisode||[]).push([[0],{24:function(t,e,n){},26:function(t,e,n){},33:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n.n(c),r=n(17),o=n.n(r),i=(n(24),n(9)),s=n(18),u=n(1),O=function(t){return t.toLocaleString("en-US",{timeZone:"PST"})},d=function(t){var e=t/1e3;return{amount:e,unit:e>1?"seconds":"second"}},p=function(t){var e=d(t).amount/60;return{amount:e,unit:e>1?"mins":"min"}},S=function(t){var e=p(t).amount/60;return{amount:e,unit:e>1?"hours ":"hour"}},j=function(t){var e=t.match(/\d+/g);return new Date(e[0],e[1]-1,e[2],e[3],e[4],e[5])},l=function(t,e){return j(t)-j(e)},h=n(8),_=n.n(h),b=n(11),T=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_TVDB_API_HOST;function f(){return(f=Object(b.a)(_.a.mark((function t(e,n){var c;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(T,"/v4/series/").concat(n),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});case 3:return c=t.sent,t.abrupt("return",c.json());case 7:throw t.prev=7,t.t0=t.catch(0),console.log("failure fetching episode: ".concat(n)),new Error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}var v=function(t,e){return f.apply(this,arguments)},E=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_TVDB_API_HOST,x={apikey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_TVDB_API_KEY,pin:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_TVDB_API_PIN},m={"Content-Type":"application/json",accept:"application/json"};function D(){return(D=Object(b.a)(_.a.mark((function t(){var e;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(E,"/v4/login"),{method:"POST",headers:m,body:JSON.stringify(x)});case 3:return e=t.sent,t.abrupt("return",e.json());case 7:throw t.prev=7,t.t0=t.catch(0),console.log("JWT token error"),new Error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}var P=function(){return D.apply(this,arguments)},C=(n(26),n(2)),g={bachelor:"70869?year=25",bachelorette:"71187?year=19",southpark:"75897?year=25",sp:"75897?year=25"},A=[d,p,S,function(t){var e=S(t).amount/24;return{amount:e,unit:e>1?"days ":"day"}}],w=function(){var t=Object(c.useState)(null),e=Object(i.a)(t,2),n=e[0],a=e[1],r=Object(c.useState)("\xaf\\_(\u30c4)_/\xaf"),o=Object(i.a)(r,2),d=o[0],p=o[1],S=Object(c.useState)(0),j=Object(i.a)(S,2),h=j[0],_=j[1],b=Object(c.useState)({iso:(new Date).toISOString(),pst:O(new Date)}),T=Object(i.a)(b,2),f=T[0],E=T[1],x=Object(c.useState)({iso:(new Date).toISOString(),pst:O(new Date)}),m=Object(i.a)(x,2),D=m[0],w=m[1],R=function(){var t=(h+1)%A.length;_(t)};return Object(c.useEffect)((function(){var t=window.location.pathname.replace(/\W/g,"");t&&(console.log(t),a(g[t])),n&&P().then((function(t){v(t.data.token,n).then((function(t){if(t.data.nextAired){var e=new Date("".concat(t.data.nextAired).concat("T20:00:00")).toISOString();E({iso:e,pst:O(new Date(e))})}}))}))}),[n]),Object(c.useEffect)((function(){var t=l(f.iso,D.iso);if(t>0){var e=A[h](t);p("".concat(e.amount.toLocaleString("en-US",{maximumFractionDigits:0})," ").concat(e.unit))}var n=setInterval((function(){return w({iso:(new Date).toISOString(),pst:O(Date())})}),1e3);return function(){return clearInterval(n)}}),[f,h,D]),Object(C.jsx)(s.a,{children:Object(C.jsxs)(u.c,{children:[Object(C.jsx)(u.a,{exact:!0,path:"/bachelor",children:Object(C.jsxs)("button",{className:"episode",onClick:R,children:[d,Object(C.jsx)("br",{}),"remaining..."]})}),Object(C.jsx)(u.a,{exact:!0,path:"/bachelorette",onClick:R,children:Object(C.jsxs)("div",{className:"episode",children:[d,Object(C.jsx)("br",{}),"remaining..."]})}),Object(C.jsx)(u.a,{exact:!0,path:"/sp",children:Object(C.jsxs)("button",{className:"episode",onClick:R,children:[d,Object(C.jsx)("br",{}),"remaining..."]})}),Object(C.jsx)(u.a,{exact:!0,path:"/south-park",children:Object(C.jsxs)("button",{className:"episode",onClick:R,children:[d,Object(C.jsx)("br",{}),"remaining..."]})}),Object(C.jsx)(u.a,{exact:!0,path:"/",children:Object(C.jsx)("div",{className:"episode",children:"When is the next episode?"})})]})})},R=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,34)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),c(t),a(t),r(t),o(t)}))};o.a.render(Object(C.jsx)(a.a.StrictMode,{children:Object(C.jsx)(w,{})}),document.getElementById("root")),R()}},[[33,1,2]]]);
//# sourceMappingURL=main.bf0cd5cf.chunk.js.map