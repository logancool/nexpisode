(this.webpackJsonpnexpisode=this.webpackJsonpnexpisode||[]).push([[0],{24:function(t,e,n){},26:function(t,e,n){},33:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n.n(c),a=n(17),o=n.n(a),i=(n(24),n(10)),s=n(18),u=n(1),p=function(t){return t.toLocaleString("en-US",{timeZone:"PST"})},l=function(t){var e=t.match(/\d+/g);return new Date(e[0],e[1]-1,e[2],e[3],e[4],e[5])};var h=function(t,e){return((l(t)-l(e))/6e4).toFixed(2)},d=n(8),b=n.n(d),f=n(11),j="https://api4.thetvdb.com";function O(){return(O=Object(f.a)(b.a.mark((function t(e,n){var c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("trying to fetch ".concat(n," episode")),t.next=4,fetch("".concat(j,"/v4/series/").concat(n),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});case 4:return c=t.sent,t.abrupt("return",c.json());case 8:throw t.prev=8,t.t0=t.catch(0),console.log("failure getting ".concat(n," episode")),new Error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}var g=function(t,e){return O.apply(this,arguments)},v="https://api4.thetvdb.com",w={apikey:"0d51e828-60db-448d-8ec4-2bceb87316d7",pin:"WORUCUTI"},S={"Content-Type":"application/json",accept:"application/json"};function x(){return(x=Object(f.a)(b.a.mark((function t(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("trying to fetch jwt token"),console.log("TVDB_API_HOST >",v),t.next=5,fetch("".concat(v,"/v4/login"),{method:"POST",headers:S,body:JSON.stringify(w)});case 5:return e=t.sent,t.abrupt("return",e.json());case 9:throw t.prev=9,t.t0=t.catch(0),console.log("fetch JWT token error"),new Error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}var m=function(){return x.apply(this,arguments)},y=(n(26),n(3)),D={bachelor:"70869?year=25",grey:""},T=function(){var t=Object(c.useState)(null),e=Object(i.a)(t,2),n=e[0],r=e[1],a=Object(c.useState)("\xaf\\_(\u30c4)_/\xaf"),o=Object(i.a)(a,2),l=o[0],d=o[1],b=Object(c.useState)({iso:(new Date).toISOString(),pst:p(new Date)}),f=Object(i.a)(b,2),j=f[0],O=f[1],v=Object(c.useState)({iso:(new Date).toISOString(),pst:p(new Date)}),w=Object(i.a)(v,2),S=w[0],x=w[1];return Object(c.useEffect)((function(){var t=window.location.pathname.replace(/\W/g,"");t&&r(D[t]),n&&m().then((function(t){console.log(n),g(t.data.token,n).then((function(t){var e=new Date("".concat(t.data.lastAired).concat("T20:00:00")).toISOString();O({iso:e,pst:p(new Date(e))})}))}))}),[n]),Object(c.useEffect)((function(){var t=h(j.iso,S.iso);t>0&&d("".concat(t," mins"));var e=setInterval((function(){return x({iso:(new Date).toISOString(),pst:p(Date())})}),1e3);return function(){return clearInterval(e)}}),[j,S]),Object(y.jsx)(s.a,{children:Object(y.jsxs)(u.c,{children:[Object(y.jsx)(u.a,{exact:!0,path:"/bachelor",children:Object(y.jsxs)("div",{className:"episode",children:[l,Object(y.jsx)("br",{}),"remaining..."]})}),Object(y.jsx)(u.a,{exact:!0,path:"/grey",children:Object(y.jsxs)("div",{className:"episode",children:[l,Object(y.jsx)("br",{}),"remaining..."]})})]})})},I=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,34)).then((function(e){var n=e.getCLS,c=e.getFID,r=e.getFCP,a=e.getLCP,o=e.getTTFB;n(t),c(t),r(t),a(t),o(t)}))};o.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(T,{})}),document.getElementById("root")),I()}},[[33,1,2]]]);
//# sourceMappingURL=main.5a47feac.chunk.js.map