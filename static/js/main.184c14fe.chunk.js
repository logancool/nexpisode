(this.webpackJsonpnexpisode=this.webpackJsonpnexpisode||[]).push([[0],{24:function(e,t,n){},25:function(e,t,n){},27:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(17),o=n.n(r),i=(n(24),n(9)),s=n(18),u=n(2),h=function(e){return e.toLocaleString("en-US",{timeZone:"PST"})},j=function(e){var t=e/1e3;return{amount:t,unit:t>1?"seconds":"second"}},p=function(e){var t=j(e).amount/60;return{amount:t,unit:t>1?"mins":"min"}},d=function(e){var t=p(e).amount/60;return{amount:t,unit:t>1?"hours ":"hour"}},b=(n(25),n(1)),l=function(e){var t=e.changeDate,n=e.airDate,a=e.nexpisode;return Object(b.jsxs)("div",{className:"episode",children:[Object(b.jsxs)("div",{children:["Next Air Date: ",n.pst]}),Object(b.jsx)("br",{}),Object(b.jsxs)("button",{onClick:t,children:[a,Object(b.jsx)("br",{}),"remaining..."]})]})},f=(n(27),function(){return Object(b.jsxs)("div",{className:"wrapper",children:[Object(b.jsx)("div",{children:"When is the next episode?"}),Object(b.jsxs)("div",{className:"shows",children:[Object(b.jsx)("a",{href:"/bachelor",children:" Bachelor"}),Object(b.jsx)("a",{href:"/sp",children:" South Park"})]})]})}),x={bachelor:"70869?year=25",bachelorette:"71187?year=19",southpark:"75897?year=25",sp:"75897?year=25"},O=function(e){var t=e.match(/\d+/g);return new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5])},v=function(e,t){return O(e)-O(t)},m=n(8),g=n.n(m),S=n(11),w="https://api4.thetvdb.com";function D(){return(D=Object(S.a)(g.a.mark((function e(t,n){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(w,"/v4/series/").concat(n),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 3:return a=e.sent,e.abrupt("return",a.json());case 7:throw e.prev=7,e.t0=e.catch(0),console.log("failure fetching episode: ".concat(n)),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var y=function(e,t){return D.apply(this,arguments)},k="https://api4.thetvdb.com",I={apikey:"0d51e828-60db-448d-8ec4-2bceb87316d7",pin:"WORUCUTI"},T={"Content-Type":"application/json",accept:"application/json"};function C(){return(C=Object(S.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(k,"/v4/login"),{method:"POST",headers:T,body:JSON.stringify(I)});case 3:return t=e.sent,e.abrupt("return",t.json());case 7:throw e.prev=7,e.t0=e.catch(0),console.log("JWT token error"),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var E=function(){return C.apply(this,arguments)},F=[j,p,d,function(e){var t=d(e).amount/24;return{amount:t,unit:t>1?"days ":"day"}}],N=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)("\xaf\\_(\u30c4)_/\xaf"),o=Object(i.a)(r,2),j=o[0],p=o[1],d=Object(a.useState)(0),O=Object(i.a)(d,2),m=O[0],g=O[1],S=Object(a.useState)({iso:(new Date).toISOString(),pst:h(new Date)}),w=Object(i.a)(S,2),D=w[0],k=w[1],I=Object(a.useState)({iso:(new Date).toISOString(),pst:h(new Date)}),T=Object(i.a)(I,2),C=T[0],N=T[1],P=function(){var e=(m+1)%F.length;g(e)};return Object(a.useEffect)((function(){var e=window.location.pathname.replace(/\W/g,"");e&&c(x[e]),n&&E().then((function(e){y(e.data.token,n).then((function(e){if(e.data.nextAired){var t=new Date("".concat(e.data.nextAired).concat("T20:00:00")).toISOString();k({iso:t,pst:h(new Date(t))})}}))}))}),[n]),Object(a.useEffect)((function(){var e=v(D.iso,C.iso);if(e>0){var t=F[m](e);p("".concat(t.amount.toLocaleString("en-US",{maximumFractionDigits:0})," ").concat(t.unit))}var n=setInterval((function(){return N({iso:(new Date).toISOString(),pst:h(Date())})}),1e3);return function(){return clearInterval(n)}}),[D,m,C]),Object(b.jsx)(s.a,{children:Object(b.jsxs)(u.c,{children:[Object(b.jsx)(u.a,{exact:!0,path:"/bachelor",children:Object(b.jsx)(l,{nexpisode:j,airDate:D,changeDate:P})}),Object(b.jsx)(u.a,{exact:!0,path:"/bachelorette",onClick:P,children:Object(b.jsx)(l,{nexpisode:j,airDate:D,changeDate:P})}),Object(b.jsx)(u.a,{exact:!0,path:"/sp",children:Object(b.jsx)(l,{nexpisode:j,airDate:D,changeDate:P})}),Object(b.jsx)(u.a,{exact:!0,path:"/south-park",children:Object(b.jsx)(l,{nexpisode:j,airDate:D,changeDate:P})}),Object(b.jsx)(u.a,{exact:!0,path:"/",children:Object(b.jsx)(f,{})})]})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,35)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(N,{})}),document.getElementById("root")),P()}},[[34,1,2]]]);
//# sourceMappingURL=main.184c14fe.chunk.js.map